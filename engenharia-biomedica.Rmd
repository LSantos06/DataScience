---
title:  Ci?ncia de Dados para Todos (Data Science
  For All) - 2018.2 - An?lise da Produ??o Cient?fica e Acad?mica da Universidade de Bras?lia - Engenharia Biom?dica
author: "Marcos Vinicius Prescendo Tonin, Lucas Nascimento, Carlos Arag?o"
date: "20/09/2018"
output:
  pdf_document: 
    latex_engine: xelatex
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_knit$set(root.dir = getwd())
```

# Introdu??o

O presente trabalho tem por finalidade entender e correlacionar dados que possam algum significado mais profundo do que aparentam ter, assim com os dados da p?s-gradua??o em engenharia biom?dica, engenharia el?trica em seus dois ramos (53001010059P8 e 53001010080P7) e engenharia de sistemas eletr?nicos e de automa??o em m?os busca-se encontrar principais fatores, professores mais envolvidos, temas mais relevantes e afins.

#Metodologia

Para um melhor resultado do trabalho buscou-se seguir e adaptar-se a metodologia CRISP-DM, para isso baseou-se no ciclo de projeto usado pelo CRISP-DM.

O ciclo ? basicamente definido pelas seguintes fases:

* **Entendimento do neg?cio** : primeiramente deve-se entender o que se busca encontrar, haja visto que n?o faz sentido fazer uma an?lise de dados sem saber o que se busca.

* **Entendimento dos dados** : Busca-se entender os dados de forma mais superficial primeiramente.

* **Prepara??o de dados ** : Ent?o limpa-se o dado e prepara o dado para que se possa facilitar seu processamento.

* **Modelagem ** : Faz a modelagem do dado.
* **Avalia??o ** : Avalia-se o resultado da modelagem.
* **Implanta??o ** : Faz uso dos dados.

As fases n?o s?o independentes entre si, mas possuem certa comunica??o, depedendo das fases, al?m de n?o ser estritamente sequencial, sendo melhor visualizado na figura abaixo.

![Ciclo do CRISP-DM que ser? usado como base](dados-2018-2/engenharia-biomedica/fluxo.png)

Por esta imagem consegue-se perceber que o entendimento do neg?cio e do dado pode muitas vezes ser alternada, indo e voltando.

## Delimita??es iniciais


###Dom?nio de Aplica??o do projeto
O dom?nio de aplica??o do projeto ?  produ??o cient?fica ou produ??o acad?mica de um subgrupo de pesquisadores vinculados ? Universidade de Bras?lia, sendo vinculado ao subtema __engenharia biom?dica__, tais arquivos foram pegos na plataforma elattes.

###Problema abordado

Problema abordado tem por finalidade obter dados de forma descritiva, quantitativa e de modelagem computacional ou estat?stica, que permitam caracterizar como, porque e tamb?m para que ocorre a produ??o cient?fica e acad?mica na ?rea de engenharia biom?dica.

# CRISP-DM Fase 1 - Entendimento do Neg?cio

A Universidade de Bras?lia ? uma das grandes universidades federais, sendo respons?vel pela produ??o de artigos visando artigos acad?micos, este presente trabalho de como programas :

## Programas de P?s-Gradua??o Grupo 15
| Ids           | ?rea de Avalia??o | Nome do Programa                                  | Link Capes                                                        | ME | DO | MP |
|---------------|------------------:|---------------------------------------------------|-------------------------------------------------------------------|----|----|----|
| 53001010059P8 |    ENGENHARIAS IV | ENGENHARIA EL?TRICA                               | [ENGENHARIA EL?TRICA (53001010059P8)](https://sucupira.capes.gov.br/sucupira/public/consultas/coleta/programa/viewPrograma.jsf?popup=true&&cd_programa=53001010059P8)                               | -  | -  | 3  |
| 53001010080P7 |    ENGENHARIAS IV | ENGENHARIA EL?TRICA                               | [ENGENHARIA EL?TRICA (53001010080P7)](https://sucupira.capes.gov.br/sucupira/public/consultas/coleta/programa/viewPrograma.jsf?popup=true&&cd_programa=53001010080P7)                               | 4  | 4  | -  |
| 53001010081P3 |    ENGENHARIAS IV | ENGENHARIA DE SISTEMAS ELETR?NICOS E DE AUTOMA??O | [ENGENHARIA DE SISTEMAS ELETR?NICOS E DE AUTOMA??O (53001010081P3)](https://sucupira.capes.gov.br/sucupira/public/consultas/coleta/programa/viewPrograma.jsf?popup=true&&cd_programa=53001010081P3) | 4  | 4  | -  |
| 53001010083P6 |    ENGENHARIAS IV | ENGENHARIA BIOM?DICA                              | [ENGENHARIA BIOM?DICA (53001010083P6)](https://sucupira.capes.gov.br/sucupira/public/consultas/coleta/programa/viewPrograma.jsf?popup=true&&cd_programa=53001010083P6)                              | 3  | -  | -  |

Sendo o enfoque principal os dados referente a engenharia biom?dica, que por sua vez tem sua pesquisa muitas voltada a novas solu??es na ?rea de biom?dica e demais ?reas representadas acima.

##Avalia??o das Circunstancias

Este trabalho ter? o limite que os pr?prios dados gerado pela plataforma elattes tem, j? que se os dados fornecidos delimitariam o escopo do projeto e at? pode-se ir, ou melhor, at? onde os dados permitem uma an?lise fidedgina. 

#CRISP-DM Fase 2 - Entendimento dos Dados

##CRISP-DM Fase.Atividade 2.1 - Coleta inicial dos dados

Todos os arquivos com dados iniciais a seguir apresentados foram fornecidos pelos professores respons?veis pela disciplina, atrav?s da plataforma elattes. Os dados foram gerados no m?s de setembro de 2018, data em que o presente grupo come?ou a realizar o trabalho e compilam informa??es entre os anos de 2010 e 2017, das ?reas expostas na se??o anterior. 
Os arquivos est?o no formato JSON, sendo todos fornecidos pelos docentes respons?vel por esta disciplina.

###Perfil profissional dos docentes vinculados ?s p?s-gradua??es

```{r}

json.perfil.biomed <- "dados-2018-2/engenharia-biomedica/279.profile.json"
file.info(json.perfil.biomed)
json.perfil.auto <- "dados-2018-2/engenharia-eletronicos-automacao/280.profile.json"
file.info(json.perfil.auto)
json.perfil.ele_p8 <- "dados-2018-2/engenharia-eletrica-p8/281.profile.json"
file.info(json.perfil.ele_p8)
json.perfil.ele_p7 <- "dados-2018-2/engenharia-eletrica-p7/282.profile.json"
file.info(json.perfil.ele_p7)

```

Os arquivos `r json.perfil.biomed`, `r json.perfil.auto`, `r json.perfil.ele_p7`, `r json.perfil.ele_p8 ` apresentam dados sobre o perfil de todos os docentes vinculados a programas de p?s-gradua??o, em engenharia biom?dia, automa??o, engenharia el?trica (p7 e p8), da UnB, entre 2010 e 2017. 


###Orienta??es de mestrado e doutorado realizadas pelos docentes vinculados ?s p?s-gradua??es

```{r}
json.advise.biomed <- "dados-2018-2/engenharia-biomedica/279.advise.json"
file.info(json.advise.biomed)
json.advise.auto <- "dados-2018-2/engenharia-eletronicos-automacao/280.advise.json"
file.info(json.advise.auto)
json.advise.ele_p8 <- "dados-2018-2/engenharia-eletrica-p8/281.advise.json"
file.info(json.advise.ele_p8)
json.advise.ele_p7 <- "dados-2018-2/engenharia-eletrica-p7/282.advise.json"
file.info(json.advise.ele_p7)

```

Os arquivos `r json.advise.biomed`, `r json.advise.auto`, `r json.advise.ele_p7`, `r json.advise.ele_p8 ` apresenta dados sobre o orienta??es de mestrado e doutorado feitas por todos os docentes vinculados a programas de p?s-gradua??o em engenharia biom?dica e demais, da UnB, entre 2010 e 2017. 


###Produ??o bibliogr?fica gerada pelos docentes vinculados ?s p?s-gradua??es

```{r}
json.producao.bibliografica.biomed <- "dados-2018-2/engenharia-biomedica/279.publication.json"
file.info(json.producao.bibliografica.biomed)
json.producao.bibliografica.auto <- "dados-2018-2/engenharia-eletronicos-automacao/280.publication.json"
file.info(json.producao.bibliografica.auto)
json.producao.bibliografica.ele_p8 <- "dados-2018-2/engenharia-eletrica-p8/281.publication.json"
file.info(json.producao.bibliografica.ele_p8)
json.producao.bibliografica.ele_p7 <- "dados-2018-2/engenharia-eletrica-p7/282.publication.json"
file.info(json.producao.bibliografica.ele_p7) 
```

Os arquivos `r json.producao.bibliografica.biomed`, `r json.producao.bibliografica.auto`, `r json.producao.bibliografica.ele_p7` e `r json.producao.bibliografica.ele_p8 ` apresenta dados sobre a produ??o bibliogr?fica gerada por todos os docentes vinculados a programas de p?s-gradua??o, em engenharia el?trica p7 e tamb?m as demais, da UnB, entre 2010 e 2017. 

###ID's dos docentes participantes e o que cont?m o arquivo list.json

```{r}
json.list.biomed <- "dados-2018-2/engenharia-biomedica/279.list.json"
file.info(json.list.biomed)
json.list.auto <- "dados-2018-2/engenharia-eletronicos-automacao/280.list.json"
file.info(json.list.auto)
json.list.ele_p8 <- "dados-2018-2/engenharia-eletrica-p8/281.list.json"
file.info(json.list.ele_p8)
json.list.ele_p7 <- "dados-2018-2/engenharia-eletrica-p7/282.list.json"
file.info(json.list.ele_p7)
```

Os arquivos `r json.list.biomed` apresenta o id de todos docentes vinculados a programas de p?s-gradua??o descritos acima da UnB, entre 2010 e 2017.Por?m tal arquivo se mostra in?til, haja visto que s? cont?m o id e que as outras vari?veis como __"nome"__ sempre tem seu valor igual a __""__. 




###Redes de colabora??o entre docentes

```{r}
json.graph.biomed<-'dados-2018-2/engenharia-biomedica/279.graph.json'
file.info(json.graph.biomed)
json.graph.auto <- "dados-2018-2/engenharia-eletronicos-automacao/280.graph.json"
file.info(json.graph.auto)
json.graph.ele_p8 <- "dados-2018-2/engenharia-eletrica-p8/281.graph.json"
file.info(json.graph.ele_p8)
json.graph.ele_p7 <- "dados-2018-2/engenharia-eletrica-p7/282.graph.json"
file.info(json.graph.ele_p7)
```

Os arquivos `r json.graph.biomed`,  `r json.graph.ele_p7`, `r json.graph.ele_p8` e `r json.graph.auto` apresenta redes de colabora??o na co-autoria de artigos cient?ficos, feitas entre os docentes vinculados a programas de p?s-gradua??o da UnB, entre 2010 e 2017.

##CRISP-DM Fase.Atividade 2.2 - Descri??o dos Dados

Para ler e manipular inicialmente esses dados, ser?o usadas primordialmente as bibliotecas seguintes 

```{r library-load}
library(jsonlite)
library(listviewer)
library(readxl)
library(readr)
library(readtext)
library(ggplot2)
library(tidyverse)
library(stringr)
library(igraph)
```

Com estas bibliotecas seremos capazes de responder e determinar qual o volume de dados, a estrutura dos dados (tipos), codifica??es usadas, etc..

###Descri??o dos dados do perfil

#### Verificando engenharia biom?dica

```{r}
unb.prof.biomed <- fromJSON("dados-2018-2/engenharia-biomedica/279.profile.json")
```

A quantidade de docentes sob an?lise ? apresentada a seguir.
```{r}
length(unb.prof.biomed)
```

Para um melhor entendimento ? importante saber como os dados est?o dispostos para algum n?mero de ocorr?ncia.

```{r}
### Usando glimpse
glimpse(unb.prof.biomed[[1]], width = 30)
```

Podemos inferir que:

* Que o professor n?o ? da ?rea da engenharia el?trica, por forma??o, mas acabou por aderir a sub?rea engenharia biom?dica.
* N?o ? nativo da UnB, sendo formado no UFG.
* Atualmente trabalha na UnB do Gama.
* Sua senioridade ? de 9.

#### Verificando engenharia de sistemas eletr?nicos e de automa??o

Fazendo processo similar para as outras ?reas.

```{r}
unb.prof.auto <- fromJSON("dados-2018-2/engenharia-eletronicos-automacao/280.profile.json")
```

A quantidade de docentes sob an?lise ? apresentada a seguir.
```{r}
length(unb.prof.auto)
```
Verificando terceiro elemento.
```{r}
### Usando glimpse
glimpse(unb.prof.auto[[3]], width = 30)
```


#### Verificando engenharia el?trica p8

```{r}
unb.prof.ele_p8 <- fromJSON("dados-2018-2/engenharia-eletrica-p8/281.profile.json")
```

A quantidade de docentes sob an?lise ? apresentada a seguir.
```{r}
length(unb.prof.ele_p8)
```
Verificando oitavo elemento.
```{r}
### Usando glimpse
glimpse(unb.prof.ele_p8[[8]], width = 30)
```

#### Verificando engenharia el?trica p7

```{r}
unb.prof.ele_p7 <- fromJSON("dados-2018-2/engenharia-eletrica-p7/282.profile.json")
```

A quantidade de docentes sob an?lise ? apresentada a seguir.
```{r}
length(unb.prof.ele_p7)
```
Verificando s?timo elemento.
```{r}
### Usando glimpse
glimpse(unb.prof.ele_p7[[7]], width = 30)


####Potencial de utiliza??o dos dados do perfil dos docentes

###Descri??o dos dados de orienta??es

unb.adv.biomed <- fromJSON("dados-2018-2/engenharia-biomedica/279.advise.json")
# Mostrando as listas presentes neste arquivo.
names(unb.adv.biomed)
# Explorando um n?vel de detalhe de Orienta??es de doutorados conclu?das
names(unb.adv.biomed$ORIENTACAO_CONCLUIDA_DOUTORADO)
############## DOUTORADO 2017
#Buscando cursos que mais produziram doutorados.
head(sort(table(unb.adv.biomed$ORIENTACAO_CONCLUIDA_DOUTORADO$`2017`$curso), decreasing = TRUE), 10)
#Sabendo suas institui??es
head(sort(table(unb.adv.biomed$ORIENTACAO_CONCLUIDA_DOUTORADO$`2017`$instituicao), decreasing = TRUE), 10)
#Sabendo seus orientadores
data_orienM <- capture.output(str(unb.adv.biomed$ORIENTACAO_CONCLUIDA_DOUTORADO$`2017`$nome_orientadores))
unique(data_orienM)
############## MESTRADO 2017
#Buscando cursos que mais produziram mestrados.
head(sort(table(unb.adv.biomed$ORIENTACAO_CONCLUIDA_MESTRADO$`2017`$curso), decreasing = TRUE), 10)
head(sort(table(unb.adv.biomed$ORIENTACAO_CONCLUIDA_MESTRADO$`2017`$instituicao), decreasing = TRUE), 10)
#Sabendo suas institui??es
head(sort(table(unb.adv.biomed$ORIENTACAO_CONCLUIDA_MESTRADO$`2017`$instituicao), decreasing = TRUE), 10)
#Sabendo seus orientadores
data_orien <- capture.output(str(unb.adv.biomed$ORIENTACAO_CONCLUIDA_MESTRADO$`2017`$nome_orientadores))
unique(data_orien)
```

Como se pode perceber apenas u, professor que orientou doutorado concluido em 2017 ( "Marilia Miranda Forte Gomes") tamb?m fez parte dos professores que orientaram no mestrado: 

* "Georges Daniel Amvame Nze"
* "Jose Felicio da Silva"
* "Lourdes Mattos Brasil"
* "Marcelino Monteiro de Andrade"
* "Marilia Miranda Forte Gomes"
* "Ronni Geraldo Gomes de Amorim"

Sendo o professor "Marcus Vin?cius Chaffim Costa" respons?vel apenas por orienta??es de doutorado em 2017.

###Descri??o dos dados list.json

####Descrição de biomedicina 

```{r}
unb.list.biomed <- fromJSON("dados-2018-2/engenharia-biomedica/279.list.json")
#analisando a quantidade de elementos presente em list.json
length(unb.list.biomed$fiocruz$id)
# Mostrando alguns id, verificar que eles s?o diferentes       
d_listID <- unb.list.biomed$fiocruz$id
unique(d_listID)
#Mostrando nome sempre igual ""
d_listNO <- unb.list.biomed$fiocruz$nome
unique(d_listNO)
#Mostrando periodo sempre igual 2010-2017 
d_listDT <- unb.list.biomed$fiocruz$periodo
unique(d_listDT)


```

Feito a an?lise, percebe-se que apenas o campo id que muda, tanto __"nome"__ (obtendo sempre o valor "") e __"periodo"__(obtendo sempre o valor["2010","2017"]), por isso considera-se este arquivo JSON como in?til, haja visto que n?o d? para obter quaisquer dado pla?sivel, somente os id.

####Descrição de engenharia  de automação

```{r}
unb.list.auto <- fromJSON("dados-2018-2/engenharia-eletronicos-automacao/280.list.json")
#analisando a quantidade de elementos presente em list.json
length(unb.list.auto$fiocruz$id)
# Mostrando alguns id, verificar que eles s?o diferentes       
d_listID <- unb.list.auto$fiocruz$id
unique(d_listID)
#Mostrando nome sempre igual ""
d_listNO <- unb.list.auto$fiocruz$nome
unique(d_listNO)
#Mostrando periodo sempre igual 2010-2017 
d_listDT <- unb.list.auto$fiocruz$periodo
unique(d_listDT)


```

####Descrição de engenharia elétrica p8

```{r}
unb.list.ele_p8 <- fromJSON("dados-2018-2/engenharia-eletrica-p8/281.list.json")
#analisando a quantidade de elementos presente em list.json
length(unb.list.ele_p8$fiocruz$id)
# Mostrando alguns id, verificar que eles s?o diferentes       
d_listID <- unb.list.ele_p8$fiocruz$id
unique(d_listID)
#Mostrando nome sempre igual ""
d_listNO <- unb.list.ele_p8$fiocruz$nome
unique(d_listNO)
#Mostrando periodo sempre igual 2010-2017 
d_listDT <- unb.list.ele_p8$fiocruz$periodo
unique(d_listDT)


```


####Descrição de engenharia elétrica p7

```{r}
unb.list.ele_p7 <- fromJSON("dados-2018-2/engenharia-eletrica-p7/282.list.json")
#analisando a quantidade de elementos presente em list.json
length(unb.list.ele_p7$fiocruz$id)
# Mostrando alguns id, verificar que eles s?o diferentes       
d_listID <- unb.list.ele_p7$fiocruz$id
unique(d_listID)
#Mostrando nome sempre igual ""
d_listNO <- unb.list.ele_p7$fiocruz$nome
unique(d_listNO)
#Mostrando periodo sempre igual 2010-2017 
d_listDT <- unb.list.ele_p7$fiocruz$periodo
unique(d_listDT)


```



###Descri??o dos dados de produ??o bibliogr?fica
```{r}
unb.pub.biomed <- fromJSON("dados-2018-2/engenharia-biomedica/279.publication.json")
# Verificando os tipos de produ??es que existe.
names(unb.pub.biomed)
#Analisando o qual tipo de informa??o se tem em peri?dicos no ano 2012.
names(unb.pub.biomed$PERIODICO$`2012`)
#Nomes dos peri?dicos em que tiveram mais publica??es na ?rea de engenharia biom?dica.
head(sort(table(unb.pub.biomed$PERIODICO$`2017`$periodico), decreasing = TRUE), 10)
#Nomes dos peri?dicos em que tiveram mais publica??es de artigos aceitos na ?rea de engenharia biom?dica da UnB no 2017.
head(sort(table(unb.pub.biomed$ARTIGO_ACEITO$`2017`$periodico), decreasing = TRUE), 10)
#Nomes dos autores que produziram um tipo de produ??o que n?o estava contemplada .
head(sort(table(unb.pub.biomed$DEMAIS_TIPOS_DE_PRODUCAO_BIBLIOGRAFICA$`2011`$autores), decreasing = TRUE), 10)

```


###Descri??o dos dados de redes de colabora??o

```{r}
unb.graph.biomed <- fromJSON("dados-2018-2/engenharia-biomedica/279.graph.json")
# Suas vari?veis
names(unb.graph.biomed)
# Quantidade de n?s
length(unb.graph.biomed$nodes$id)
# Quantidade de links de fonte 
length(unb.graph.biomed$links$source)
# Quantidade de links de chegada 
length(unb.graph.biomed$links$target)
#exemplos de pesos da aresta
str(unb.graph.biomed$links$weigth)
```


##CRISP-DM Fase.Atividade 2.3 - An?lise explorat?ria dos dados

###Arquivo Profile

```{r}
# Total de ?reas de atua??o de todos profissionais
sum(sapply(unb.prof.biomed, function(x) nrow(x$areas_de_atuacao)))
# N?mero de pessoas por grande area
table(unlist(sapply(unb.prof.biomed, function(x) (x$areas_de_atuacao$grande_area))))
# N?mero de pessoas que produziram os tipos de produ??o espec?fico
table(unlist(sapply(unb.prof.biomed, function(x) names(x$producao_bibiografica))))
# N?mero de publica??es por tipo
#####ARTIGO ACEITO###############
sum(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$ARTIGO_ACEITO$ano)))
# N?mero de pessoas por quantitativo de produ??es por pessoa 0 = 1; 1 = 2...
table(unlist(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$ARTIGO_ACEITO$ano))))

#####CAPITULO DE LIVRO###############
sum(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$CAPITULO_DE_LIVRO$ano)))
# N?mero de pessoas por quantitativo de produ??es por pessoa 0 = 1; 1 = 2...
table(unlist(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$CAPITULO_DE_LIVRO$ano))))

#####LIVRO###############
sum(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$LIVRO$ano)))
# N?mero de pessoas por quantitativo de produ??es por pessoa 0 = 1; 1 = 2...
table(unlist(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$LIVRO$ano))))

#####PERI?DICO###############
sum(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$PERIODICO$ano)))
# N?mero de pessoas por quantitativo de produ??es por pessoa 0 = 1; 1 = 2...
table(unlist(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$PERIODICO$ano))))

#####TEXTO EM JORNAIS###############
sum(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$TEXTO_EM_JORNAIS$ano)))
# N?mero de pessoas por quantitativo de produ??es por pessoa 0 = 1; 1 = 2...
table(unlist(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$TEXTO_EM_JORNAIS$ano))))

#####DEMAIS TIPOS###############
sum(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$DEMAIS_TIPOS_DE_PRODUCAO_BIBLIOGRAFICA$ano)))
# N?mero de pessoas por quantitativo de produ??es por pessoa 0 = 1; 1 = 2...
table(unlist(sapply(unb.prof.biomed, function(x) length(x$producao_bibiografica$DEMAIS_TIPOS_DE_PRODUCAO$ano))))



# N?mero de produ??es por ano
table(unlist(sapply(unb.prof.biomed, function(x) (x$producao_bibiografica$ARTIGO_ACEITO$ano))))
table(unlist(sapply(unb.prof.biomed, function(x) (x$producao_bibiografica$CAPITULO_DE_LIVRO$ano))))
table(unlist(sapply(unb.prof.biomed, function(x) (x$producao_bibiografica$LIVRO$ano))))
table(unlist(sapply(unb.prof.biomed, function(x) (x$producao_bibiografica$PERIODICO$ano))))
table(unlist(sapply(unb.prof.biomed, function(x) (x$producao_bibiografica$TEXTO_EM_JORNAIS$ano))))
# N?mero de pessoas que realizaram diferentes tipos de orienta??es
length(unlist(sapply(unb.prof.biomed, function(x) names(x$orientacoes_academicas))))
# N?mero de pessoas por tipo de orienta??o
table(unlist(sapply(unb.prof.biomed, function(x) names(x$orientacoes_academicas))))
#N?mero de orienta??es concluidas
sum(sapply(unb.prof.biomed, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano)))
sum(sapply(unb.prof.biomed, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano)))
sum(sapply(unb.prof.biomed, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano)))

# N?mero de pessoas por quantitativo de orienta??es por pessoa 0 = 1; 1 = 2...
table(unlist(sapply(unb.prof.biomed, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano))))
table(unlist(sapply(unb.prof.biomed, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano))))
table(unlist(sapply(unb.prof.biomed, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano))))

# N?mero de orienta??es por ano
table(unlist(sapply(unb.prof.biomed, function(x) (x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano))))
table(unlist(sapply(unb.prof.biomed, function(x) (x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano))))
table(unlist(sapply(unb.prof.biomed, function(x) (x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano))))

```

###Arquivo Publica??o
```{r}

#Criando um data-frame com todos os anos
unb.pub.biomed.df <- data.frame()
for (i in 1:length(unb.pub.biomed[[1]]))
  unb.pub.biomed.df <- rbind(unb.pub.biomed.df, unb.pub.biomed$PERIODICO[[i]])
glimpse(unb.pub.biomed.df)
# Limpando o data-frame de listas
unb.pub.biomed.df$autores <- gsub("\",\"|\", \"", "; ", unb.pub.biomed.df$autores)
unb.pub.biomed.df$autores <- gsub("\"|c\\(|\\)", "", unb.pub.biomed.df$autores)
unb.pub.biomed.df$`autores-endogeno` <- gsub(",", ";", unb.pub.biomed.df$`autores-endogeno`)
unb.pub.biomed.df$`autores-endogeno` <- gsub("\"|c\\(|\\)", "", unb.pub.biomed.df$`autores-endogeno`)
glimpse(unb.pub.biomed.df)


### ARQUIVO PROCESSADO E LIMPO 
## Publica??es por natureza - todas foram completas
table(unb.pub.biomed.df$natureza)

## Publica??es 2010 at? 2017
table(unb.pub.biomed.df$ano)
## Publica??es por peri?dico, mostrando os top-5 na ?rea de biom?dica
d <- table(unb.pub.biomed.df$periodico)
head(sort(d,decreasing = TRUE),n=5)

## Mostrando os autores que tiveram mais publica??o
### Neste caso ? importante mostra que como a n?o uniformidade de como se escreve acaba por tornar este dado defasado
head(sort(table(toupper(unlist(strsplit(unb.pub.biomed.df$autores,";")))),decreasing = TRUE),n=10)
## Mostrando os autores-endogeno que tiveram mais publica??o
head(sort(table(unlist(unb.pub.biomed.df$`autores-endogeno`)),decreasing = TRUE),n=10)
```


###Arquivo Orienta??o
```{r}
#Orienta??o
#Visualizar a estrutura do json no painel Viewer
#jsonedit(unb.adv.biomed)
#Reunir todos os anos e orienta??es concluidas em um mesmo data-frame
unb.adv.biomed.tipo.df <- data.frame(); unb.adv.biomed.df <- data.frame()
for (i in 1:length(unb.adv.biomed[[1]]))
  unb.adv.biomed.tipo.df <- rbind(unb.adv.biomed.tipo.df, unb.adv.biomed$ORIENTACAO_CONCLUIDA_POS_DOUTORADO[[i]])
unb.adv.biomed.df <- rbind(unb.adv.biomed.df, unb.adv.biomed.tipo.df); unb.adv.biomed.tipo.df <- data.frame()
for (i in 1:length(unb.adv.biomed[[1]]))
  unb.adv.biomed.tipo.df <- rbind(unb.adv.biomed.tipo.df, unb.adv.biomed$ORIENTACAO_CONCLUIDA_DOUTORADO[[i]])
unb.adv.biomed.df <- rbind(unb.adv.biomed.df, unb.adv.biomed.tipo.df); unb.adv.biomed.tipo.df <- data.frame()
for (i in 1:length(unb.adv.biomed[[1]]))
  unb.adv.biomed.tipo.df <- rbind(unb.adv.biomed.tipo.df, unb.adv.biomed$ORIENTACAO_CONCLUIDA_MESTRADO[[i]])
unb.adv.biomed.df <- rbind(unb.adv.biomed.df, unb.adv.biomed.tipo.df)
glimpse(unb.adv.biomed.df)
#Transformar as colunas de listas em caracteres eliminando c("")
unb.adv.biomed.df$nome_orientadores <- gsub("\"|c\\(|\\)", "", unb.adv.biomed.df$nome_orientadores)
unb.adv.biomed.df$id_lattes_orientadores <- gsub("\"|c\\(|\\)", "", unb.adv.biomed.df$id_lattes_orientadores)
#Separar as colunas com dois orientadores
unb.adv.biomed.df <- separate(unb.adv.biomed.df, nome_orientadores, into = c("ori1", "ori2"), sep = ",")
# Contando quem tem apenas 1 orientador
sum(is.na(unb.adv.biomed.df$ori2))
unb.adv.biomed.df <- separate(unb.adv.biomed.df, id_lattes_orientadores, into = c("idLattes1", "idLattes2"), sep = ",")
# Contando quem tem apenas 1 orientador
sum(is.na(unb.adv.biomed.df$idLattes2))
#Numero de orientacoes por ano
table(unb.adv.biomed.df$ano)
#Numero de institui??es 
sort(table(unb.adv.biomed.df$instituicao),decreasing = TRUE)
#Cursos que est?o envolvido na p?s-gradua??o de engenharia biom?dica
cursos_d <- sort(table(unb.adv.biomed.df$curso), decreasing = TRUE)
cursos_d
cursos_d5<-head(cursos_d,5)
table(unb.adv.biomed.df$codigo_do_curso)
#Quantidas de natureza dos trabalhos orientado
table(unb.adv.biomed.df$natureza)
#Tabela com nome de professor e numero de orientacoes
head(sort(table(rbind(unb.adv.biomed.df$ori1, unb.adv.biomed.df$ori2)), decreasing = TRUE), 20)
# Tabela com nome dos alunos que mais foram orientados
head(sort(table(toupper(unb.adv.biomed.df$nome_aluno)),decreasing = TRUE),n=10)
# Quantidade de alunos que n?o s?o bolsistas 
sum(unb.adv.biomed.df$bolsa == 'NAO')
# Quantidade de alunos que s?o bolsistas 
sum(unb.adv.biomed.df$bolsa == 'SIM')
# Reparar que a maioria n?o tem ag?ncia financiadora por tr?s e h? dois alunos que tem bolsa mas que n?o tem/declararam ag?ncia financiadora.
table(unb.adv.biomed.df$agencia_financiadora)
```


##CRISP-DM Fase.Atividade 2.4 - Verifica??o da qualidade dos dados. 

Para o levantamento de informa??o os dados em geral s?o preciso, como por exemplo saber quais os professores mais envolvido em orienta??es, quantos artigos foram concluidos, informa??es por ano. Mas houve dificuldade quando o dado que se queria analisar dependia de como a pessoa que cadastrou escreveu, como por exemplo os autores nos artigos, haja visto que n?o foi encontrado um padr?o, dificultou qualquer an?lise. 

#CRISP-DM Fase 3 -  __Prepara??o dos Dados__


##CRISP-DM Fase.Atividade 3.1 - Sele??o dos dados. 

Para a principal utiliza??o dos dados foi definidos os __data frames__ unb.adv.biomed.df, que neste caso cont?m alguns informa??es de qual a natureza da pesquisa produzida, qual aluno produziu, seus respectivos orientadores, o ano e etc. Tamb?m foi definido os dados importantes do arquivo profile.json, gerando o __data frame__ unb.prof.biomed.df, que j? est? limpo, com as principais colunas definidas.

##CRISP-DM Fase.Atividade 3.2 - Limpeza dos dados

Esta etapa se mistura com a pr?xima pelo fato de limpar e preparar o dado, ou seja, j? construir.

##CRISP-DM Fase.Atividade 3.3 - Constru??o dos dados

Construindo e limpando alguns dados de interesse.
```{r}
# Funcoes auxiliares que ser?o usados
# estas fun??es foram disponibilizada pelo professor da disciplina
# converte as colunas de um dataframe tipo lista em tipo character
cv_tplista2tpchar <- function( df  ) { 
  for( variavel in names(df)) {
    if (class(df[[variavel]]) == "list" ) {
      df[[variavel]] <- lapply(df[[variavel]] ,   function(x)   lista2texto( x  ) ) 
      df[[variavel]] <- as.character( df[[variavel]] )
    }
  }
  return(df)
}
###


# converte o conteudo de lista em array de characters
lista2texto <- function( lista  ) {
  if(is.null(lista)) {
    return ( NULL )
  }
  saida <- ""
  for( j in 1:length(lista)) { 
    for( i in 1:length(lista[[j]]) ) {
      elemento <- lista[[j]][i] 
      if( !is.null(elemento)) { 
        if( i == length(lista[[j]]) & j == length(lista)  ) { 
          # se for o ultimo elemento nao coloque o ponto e virgula no final            
          saida <- paste0( saida , elemento  )
        } else {
          # enquanto nao for o ultimo coloque ; separando os elementos concatenados 
          saida <- paste0( saida , elemento , sep = " ; ")
        }
      }  
    }
  }
  return( saida )
}

# Converte producao elattes separada por anos em um unico dataframe 
converte_producao2dataframe<- function( lista_producao ) {
  df_saida <- NULL 
  
  for( ano in names(lista_producao)) {
    df_saida <- rbind(df_saida , lista_producao[[ano]])
  }
  
  # converte tipo lista em array de character 
  df_saida <- cv_tplista2tpchar(df_saida)
  return(df_saida)
  

}

#concatena dois dataframes com  colunas diferentes 
concatenadf <- function( df1, df2) { 
  #cria colunas de df1 que faltam em df2
  for( coluna in names(df1 ) ) {
    if( !is.element(coluna, names(df2) )) {
      df2[coluna] <- NA
    }
  }
  
  #cria colunas de df2 que faltam em df1  
  for( coluna in names(df2 ) ) {
    
    if( !is.element(coluna, names(df1) )) {
      df1[coluna] <- NA
    }
  }
  
  
  #faz o rbind dos dois dataframes 
  df_final <- rbind(df1 , df2)
  return(df_final)
  
}

# Extracao dos perfis dos professores 

extrai_1perfil <- function( professor ) {
  idLattes <- names(professor)
  nome <- professor[[idLattes]]$nome   
  resumo_cv <- professor[[idLattes]]$resumo_cv 
  endereco_profissional <- professor[[idLattes]]$endereco_profissional #list 
  instituicao <- endereco_profissional$instituicao
  orgao <- endereco_profissional$orgao
  unidade <- endereco_profissional$unidade
  DDD <- endereco_profissional$DDD
  telefone <- endereco_profissional$telefone
  bairro <- endereco_profissional$bairro
  cep <- endereco_profissional$cep
  cidade <- endereco_profissional$cidade
  senioridade <- professor[[idLattes]]$senioridade  
  df_1perfil <- data.frame( idLattes , nome, resumo_cv ,instituicao , 
                           orgao, unidade , DDD, telefone, bairro,cep,cidade , senioridade,
                           stringsAsFactors = FALSE)
  
  return(df_1perfil)  
}

extrai_perfis <- function(jsonProfessores) {
  df_saida <- data.frame()
  for( i in 1:length(jsonProfessores)) {
    jsonProfessor <- jsonProfessores[i]
    df_professor <- extrai_1perfil(jsonProfessor)
    if( nrow(df_saida) > 0 ) {
      df_saida <- rbind(df_saida , df_professor)
    } else {
      df_saida <- df_professor 
    }
  }
   
  return(df_saida)
}

# Extracao da producao bibliografica dos professores 

extrai_1producao <- function(professor) {
  idLattes <- names(professor)
  df_1producao <<- NULL 
  producao_bibliografica <- professor[[idLattes]]$producao_bibiografica  #list
  for( tipo_producao in names(producao_bibliografica)) { 
    df_temporario <- cv_tplista2tpchar ( producao_bibliografica[[tipo_producao]]) 
    df_temporario$tipo_producao <-  tipo_producao 
    df_temporario$idLattes <-  idLattes
    df_1producao <- concatenadf( df_1producao , df_temporario  )
  }  
  return(df_1producao)
}

extrai_producoes <- function( jsonProfessores) {
  df_saida <- data.frame()
  for( i in 1:length(jsonProfessores)) {
    jsonProfessor <- jsonProfessores[i]
    df_producao <- extrai_1producao(jsonProfessor)
    if( nrow(df_saida) > 0 ) {
      df_saida <- concatenadf(df_saida , df_producao)
    } else {
      df_saida <- df_producao 
    }
  }
  df_saida <- df_saida %>% filter( !is.na(tipo_producao))
  return(df_saida)  
}

# Extracao das orientacoes dos professores 

extrai_1orientacao <- function(professor) {
  idLattes <- names(professor)
  df_1orientacao <- NULL
  orientacoes_academicas  <- professor[[idLattes]]$orientacoes_academicas  #list
  for( orientacao in names(orientacoes_academicas )) { 
    df_temporario <- cv_tplista2tpchar ( orientacoes_academicas[[orientacao]])
    df_temporario$orientacao <-  orientacao 
    df_temporario$idLattes <-  idLattes
    df_1orientacao <- concatenadf( df_1orientacao , df_temporario  )
  }  
  return(df_1orientacao) 
}

extrai_orientacoes <- function(jsonProfessores) {
  df_saida <- data.frame()
  for( i in 1:length(jsonProfessores)) {
    jsonProfessor <- jsonProfessores[i]
    df_orientacao <- extrai_1orientacao(jsonProfessor)
    if( nrow(df_saida) > 0 ) {
      df_saida <- concatenadf(df_saida , df_orientacao)
    } else {
      df_saida <- df_orientacao
    }
  }
  df_saida <- df_saida %>% filter(!is.na(idLattes))
  return(df_saida)  
}

# Extracao das areas de atuacao dos professores 

extrai_1area_de_atuacao <- function(professor){
  idLattes <- names(professor)
  df_1area <-  professor[[idLattes]]$areas_de_atuacao
  df_1area$idLattes <- idLattes
  return(df_1area)
}

extrai_areas_atuacao <- function(jsonProfessores){
  df_saida <- data.frame()
  for( i in 1:length(jsonProfessores)) {
    jsonProfessor <- jsonProfessores[i]
    df_area_atuacao <- extrai_1area_de_atuacao(jsonProfessor)
    if( nrow(df_saida) > 0 ) {
      df_saida <- concatenadf(df_saida , df_area_atuacao)
    } else {
      df_saida <- df_area_atuacao
    }
  }
  df_saida <- df_saida %>% filter( !is.na(idLattes))
  return(df_saida)   
}
########################### Inicio ###############################
#### Come?o da prepara??o dos dados referente a profile

unb.prof.biomed.json <- read_file("dados-2018-2/engenharia-biomedica/279.profile.json")
unb.prof.biomed.df.capes <- read.csv("dados-2018-2/PesqPosCapes.csv", 
                              sep = ";", header = TRUE, colClasses = "character")
unb.prof.biomed <- fromJSON(unb.prof.biomed.json)
length(unb.prof.biomed)

# extrai perfis dos professores 
unb.prof.biomed.df.professores <- extrai_perfis(unb.prof.biomed)

# extrai producao bibliografica de todos os professores 
unb.prof.biomed.df.publicacoes <- extrai_producoes(unb.prof.biomed)

#extrai orientacoes 
unb.prof.biomed.df.orientacoes <- extrai_orientacoes(unb.prof.biomed)

#extrai areas de atuacao 
unb.prof.biomed.df.areas.de.atuacao <- extrai_areas_atuacao(unb.prof.biomed)

#salva os daframes 
save(unb.prof.biomed.df.professores, unb.prof.biomed.df.publicacoes,
     unb.prof.biomed.df.orientacoes, unb.prof.biomed.df.areas.de.atuacao, file = "dataframes.Rda")

#cria arquivo para an?lise
unb.prof.biomed.df <- data.frame()
unb.prof.biomed.df <- unb.prof.biomed.df.professores %>% 
  select(idLattes, nome, resumo_cv, senioridade) %>% 
  left_join(
    unb.prof.biomed.df.orientacoes %>% 
      select(orientacao, idLattes) %>% 
      filter(!grepl("EM_ANDAMENTO", orientacao)) %>% 
      group_by(idLattes) %>% 
      count(orientacao) %>% 
      spread(key = orientacao, value = n), 
    by = "idLattes") %>% 
  left_join(
    unb.prof.biomed.df.publicacoes %>% 
      select(tipo_producao, idLattes) %>% 
      filter(!grepl("ARTIGO_ACEITO", tipo_producao)) %>% 
      group_by(idLattes) %>% 
      count(tipo_producao) %>% 
      spread(key = tipo_producao, value = n), 
    by = "idLattes") %>% 
  left_join(
    unb.prof.biomed.df.areas.de.atuacao %>% 
      select(area, idLattes) %>% 
      group_by(idLattes) %>% 
      summarise(n_distinct(area)), 
    by = "idLattes") %>% 
  left_join(
    unb.prof.biomed.df.capes %>% 
      select(AreaPos, idLattes) %>% 
      group_by(idLattes) %>% 
      summarise(n_distinct(AreaPos)), 
    by = "idLattes")

glimpse(unb.prof.biomed.df)
head(unb.prof.biomed.df,3)
## Mostrando dados processados referente ao arquivo 279.publication.json
glimpse(unb.pub.biomed.df)
#Podemos ver que cont?m natureza, titulo, periodico , autores .... 
head(unb.pub.biomed.df,3)
## Mostrando dados processados referente ao arquivo 279.advise.json
glimpse(unb.adv.biomed.df)
#Podemos ver que cont?m natureza, titulo, autores, ano, nome aluno, orientadores .... 
head(unb.adv.biomed.df,3)
###################### Os arquivos 
###### 279.graph.json - usado para mostrar correla??es
#### 279.list.json - Como explicado este arquivo n?o contem nenhuma informa??o interessante.


```


##CRISP-DM Fase.Atividade 3.4 - Integra??o dos dados

Neste presente trabalho, n?o se viu a necessidade de fazer merge entres os datas frames.

##CRISP-DM Fase.Atividade 3.5 -  Formata??o dos dados

As formata??es de dados necess?ria j? foram feitas, como por exemplo "orientadores" virou "orie1" e "orie2", fazendo com que cada vari?vel contenha apenas um elemento, e n?o mais uma lista de orientadores. 

#CRISP-DM Fase 4 - __Modelagem__

Nesta fase, ap?s ter feito limpeza e prepara??o dos dados, tem-se que se decidir qual ferramenta usar : computacionais, matem?ticas ou est?tistica. Esta fase, por enquanto, ser? omitida.

#CRISP-DM Fase 5 - __Avalia??o__

Ser? exposto em forma de gr?ficos certos dados que se acharam convenientes e interessante.

Aqui visa-se ver as quantidades de publica??es feitas por anos na ?rea de engenharia de biom?dica. 
```{r}
unb.adv.biomed.df %>%
group_by(ano) %>%
summarise(Quantidade = n()) %>%
ggplot(aes(x = ano, y = Quantidade)) +
geom_bar(position = "stack",stat = "identity", fill = "red")+
geom_text(aes(label=Quantidade), vjust=-0.3, size=2.5)+
theme_minimal()
```

Agora verificando a quantidade separada por tipo de publica??o.

```{r}
unb.adv.biomed.df %>%
group_by(natureza) %>%
summarise(Quantidade = n()) %>%
ggplot(aes(x = natureza, y = Quantidade)) +
geom_bar(position = "stack",stat = "identity", fill = "blue")+
geom_text(aes(label=Quantidade), vjust=-0.3, size=2.5)+
theme_minimal()
```

Verificando os cursos mais presentes.

```{r}
cursos_d5
pie(cursos_d5,clockwise=TRUE,main="Cursos mais presentes")

```
Quantos bolsistas tem ?

```{r}
unb.adv.biomed.df %>%
group_by(bolsa) %>%
summarise(Quantidade = n()) %>%
ggplot(aes(x = bolsa, y = Quantidade)) +
geom_bar(position = "stack",stat = "identity", fill = "blue")+
geom_text(aes(label=Quantidade), vjust=-0.3, size=2.5)+
theme_minimal()
```

Assim, estes gr?ficos permitem verificar alguns aspectos importantes sobre as orienta??es.

Verificando, agora, o arquivo 279.publication.json, contendo informa??es sobre as publica??es.

```{r}
pie(table(unb.pub.biomed.df$natureza),main="Natureza das publica??es",col = "cyan")

```

Separando por ano e depois por peri?dico.

```{r}
unb.pub.biomed.df %>%
group_by(ano) %>%
summarise(Quantidade = n()) %>%
ggplot(aes(x = ano, y = Quantidade)) +
geom_bar(position = "stack",stat = "identity", fill = "blue")+
geom_text(aes(label=Quantidade), vjust=-0.3, size=2.5)+
theme_minimal()
```

```{r}

d <- table(unb.pub.biomed.df$periodico)
head(sort(d,decreasing = TRUE),n=5)

```

Mostrando os autores que mais participaram de publica??es. 

```{r}


head(sort(table(toupper(unlist(strsplit(unb.pub.biomed.df$autores,";")))),decreasing = TRUE),n=10)

```

Assim, vemos que h? algumas incoer?ncia neste dado acima, isto se d? pela falta de uniformidade.

Analisando o arquivo 279.profile.json.

```{r}
unb.prof.biomed.df %>%
group_by(senioridade) %>%
summarise(Quantidade = n()) %>%
ggplot(aes(x = senioridade, y = Quantidade)) +
geom_bar(position = "stack",stat = "identity", fill = "green")+
geom_text(aes(label=Quantidade), vjust=-0.3, size=2.5)+
theme_minimal()
```

Analisando quandidade de orienta??es conclu?das no doutorado por professor.

```{r}
unb.prof.biomed.df %>%
group_by(nome) %>%
filter(!is.na(ORIENTACAO_CONCLUIDA_DOUTORADO ))%>%  
ggplot(aes(x = nome, y = ORIENTACAO_CONCLUIDA_DOUTORADO)) +
geom_bar(position = "stack",stat = "identity", fill = "blue")+
geom_text(aes(label=nome), vjust=-0.3, size=2.5)+
theme_minimal()
```

Analisando quandidade de orienta??es conclu?das no mestrado por professor.

```{r}
unb.prof.biomed.df %>%
group_by(nome) %>%
filter(!is.na(ORIENTACAO_CONCLUIDA_MESTRADO ))%>%  
ggplot(aes(x = nome, y = ORIENTACAO_CONCLUIDA_MESTRADO)) +
geom_bar(position = "stack",stat = "identity", fill = "gray")+
geom_text(aes(label=nome), vjust=-0.3, size=2.5)+
theme_minimal()
```

Analisando quandidade de orienta??es conclu?das no p?s doutorado por professor.

```{r}
unb.prof.biomed.df %>%
group_by(nome) %>%
filter(!is.na(ORIENTACAO_CONCLUIDA_POS_DOUTORADO))%>%  
ggplot(aes(x = nome, y = ORIENTACAO_CONCLUIDA_POS_DOUTORADO)) +
geom_bar(position = "stack",stat = "identity", fill = "gray")+
geom_text(aes(label=nome), vjust=-0.3, size=2.5)+
theme_minimal()
```

Analisando quandidade de orienta??es conclu?das em outros tipos por professor.

```{r}
unb.prof.biomed.df %>%
group_by(nome) %>%
filter(!is.na(OUTRAS_ORIENTACOES_CONCLUIDAS))%>%  
ggplot(aes(x = nome, y = OUTRAS_ORIENTACOES_CONCLUIDAS)) +
geom_bar(position = "stack",stat = "identity", fill = "gray")+
geom_text(aes(label=nome), vjust=-0.3, size=2.5)+
theme_minimal()
```

Analisando quandidade de eventos ido por professor.

```{r}
unb.prof.biomed.df %>%
group_by(nome) %>%
filter(!is.na(EVENTO))%>%  
ggplot(aes(x = nome, y = EVENTO)) +
geom_bar(position = "stack",stat = "identity", fill = "red")+
geom_text(aes(label=nome), vjust=-0.3, size=2.5)+
theme_minimal()
```

Analisando quandidade de peri?dicos por professor.

```{r}
unb.prof.biomed.df %>%
group_by(nome) %>%
filter(!is.na(PERIODICO))%>%  
ggplot(aes(x = nome, y = PERIODICO)) +
geom_bar(position = "stack",stat = "identity", fill = "green")+
geom_text(aes(label=nome), vjust=-0.3, size=2.5)+
theme_minimal()
```

Analisando quandidade de livro por professor.

```{r}
unb.prof.biomed.df %>%
group_by(nome) %>%
filter(!is.na(LIVRO))%>%  
ggplot(aes(x = nome, y = LIVRO)) +
geom_bar(position = "stack",stat = "identity", fill = "blue")+
geom_text(aes(label=nome), vjust=-0.3, size=2.5)+
theme_minimal()
```

Analisando quandidade de texto em jornais por professor.

```{r}
unb.prof.biomed.df %>%
group_by(nome) %>%
filter(!is.na(TEXTO_EM_JORNAIS))%>%  
ggplot(aes(x = nome, y = TEXTO_EM_JORNAIS)) +
geom_bar(position = "stack",stat = "identity", fill = "black")+
geom_text(aes(label=nome), vjust=-0.3, size=2.5)+
theme_minimal()
```

Analisando quantidade de professor por major ?rea e posteriormente o ?rea p?s-gradua??o.

```{r}
unb.prof.biomed.df %>%
group_by(`n_distinct(area)`) %>%
summarise(Quantidade = n()) %>%
ggplot(aes(x = `n_distinct(area)`, y = Quantidade)) +
geom_bar(position = "stack",stat = "identity", fill = "green")+
geom_text(aes(label=Quantidade), vjust=-0.3, size=2.5)+
theme_minimal()
```


Analisando quantidade de professor por major ?rea e posteriormente o ?rea p?s-gradua??o.

```{r}
unb.prof.biomed.df %>%
group_by(`n_distinct(AreaPos)`) %>%
summarise(Quantidade = n()) %>%
ggplot(aes(x = `n_distinct(AreaPos)`, y = Quantidade)) +
geom_bar(position = "stack",stat = "identity", fill = "grey")+
geom_text(aes(label=Quantidade), vjust=-0.3, size=2.5)+
theme_minimal()
```

#Teste grafos 
```{r}
unb.graph.biomed$links$source
unb.graph.biomed$links$target
list_biomed <- c(rbind(unb.graph.biomed$links$source,unb.graph.biomed$links$target))
list_biomed

g_biomed<-graph(list_biomed, directed=TRUE)
g_biomed[ 1:length(g_biomed) ]
plot(g_biomed)
```

#CRISP-DM Fase 6 - __Implanta??o__ (_deployment_)
 
 No caso deste presente trabalho, ? basicamente os scripts desenvolvido ao decorrer do mesmo.
 
#Conclus?o

Ao final deste trabalho, podemos chegar a conclus?o que com a "ferramenta" CRISP-DM foi poss?vel realizar uma an?lise de dados apartir de v?rios arquivos __JSON__, assim, foi poss?vel perceber como funciona - pelo menos de maneira simpl?ria - a vida de cientista de dados, como se deve preparar os dados, como se deve buscar informa??es ?teis, analisar determinadas informa??es, plotar gr?ficos para um efeito mais visual, ver a dificuldade que falta de padroniza??o causa, ainda mais quando se tem os mais diversos arquivos para analisar das mais diversas fontes.

O trabalho usou como base o arquivo disponibilizado pelo professor, no qual continha as explica??es de todas as fase do CRISP-DM, seguindo o modelo passado pelo professor, tentou-se ir descorrendo sobre o script em R que se vinha fazendo e correlacionando com alguma fase do CRISP-DM, mas tal divis?o n?o pode ser considerada totalmente fidedigna, haja visto que muitas vezes h? mistura de fases e n?o apenas fases totalmente isoladas, sem influ?ncia de outras, procurou-se explicar de maneira simples como se encaixava cada fase.

Por fim, podemos chegar a alguns resultados valorosos ,como por exemplo : as revistas que tem mais publica??es advindas da p?s-gradua??o em engenharia bi?medica, mas nem tudo s?o flores, algumas dificuldades vieram em decorr?ncia da falta de uniformidade, por?m podemos aprender bastante com este trabalho e nos interar de como come?ar a fazer an?lise de dados.

# Refer?ncias
